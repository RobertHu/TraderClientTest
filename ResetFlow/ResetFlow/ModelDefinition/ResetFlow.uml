<?xml version="1.0" encoding="utf-8"?>
<modelStoreModel xmlns:dm0="http://schemas.microsoft.com/VisualStudio/2008/DslTools/Core" xmlns:dm1="http://schemas.microsoft.com/dsltools/Kernel" xmlns:dm2="http://schemas.microsoft.com/dsltools/Component" xmlns:dm3="http://schemas.microsoft.com/dsltools/UseCase" xmlns:dm4="http://schemas.microsoft.com/dsltools/Activity" xmlns:dm5="http://schemas.microsoft.com/dsltools/Interaction" xmlns:dm6="http://schemas.microsoft.com/dsltools/UmlModelLibrary" xmlns:dm7="http://schemas.microsoft.com/dsltools/UmlDiagrams" xmlns:dm8="http://schemas.microsoft.com/dsltools/SimpleShapesModel" xmlns:dm9="http://schemas.microsoft.com/VisualStudio/TeamArchitect/ActivityDesigner"
  dslVersion="1.0.0.0"
  Id="e0e73936-4c74-407e-8755-6d4db97d9401"
  name="ResetFlow" xmlns="http://schemas.microsoft.com/dsltools/ModelStore">
  <ownedCommentsInternal>
    <comment
      Id="9d04286d-edf8-404e-b40d-b48db62296da">
      <body>还有未处理的Order？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="0508ce0c-ad66-4d8a-b015-71c65e0ef7cf"
          LastKnownName="Decision3"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="a0742c19-b028-43a9-9d7c-0c36a75cefdc">
      <body>用历史价格日结</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="cd2040f0-fcd3-4a14-94a0-2c54f184b5ee"
          LastKnownName="Decision1"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="29dbf28a-f1aa-458f-88e1-421beb39d3e4">
      <body>

&lt;Account&gt;
&lt;Orders&gt;
 &lt;Order&gt;
 &lt;Bills&gt;
 &lt;Bill  Value = ""  ValueDate = ""  TradeDay = ""    /&gt;
&lt;/Bills&gt;
 &lt;/Order&gt;
&lt;/Orders&gt;
</body>
      <annotatedElements>
        <opaqueActionMoniker
          Id="a232198a-35a9-4ee2-a699-696357098994"
          LastKnownName="将每个Order的PL按右侧格式保存到Account下面的Order节点下"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="aed7b705-5bb7-4537-a859-c90901780a78">
      <body>还有未处理的account？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="185b7150-09b8-40d1-af77-407b9ca27f24"
          LastKnownName="Decision8"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="013b942e-b190-4e1b-8c5c-c33923203215">
      <body>还有未处理的tradeDay？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="cac0f6d5-6358-4128-bf10-4746f00adf82"
          LastKnownName="Decision9"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="11542e2d-3d0c-43a7-b4d2-6a7a3642c984">
      <body>还有未处理的account？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="c23358b9-020b-4f8d-9110-cb591f490bc6"
          LastKnownName="Decision10"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="eb31b188-0a74-4018-ae5d-110013ce46fd">
      <body>还有未处理的tradeDay？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="db2fa227-7bea-4804-a40e-38c496a4a758"
          LastKnownName="Decision2"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="4412a95a-e1ed-422e-a4c2-3e751fcbef55">
      <body>还有未处理的account？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="08339879-9ce4-4df1-acd4-7cfbe3dfc5ae"
          LastKnownName="Decision4"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="1273ab73-1d3b-46a5-8e6c-6673f56395c6">
      <body>还有未处理的instalmentOrder？</body>
      <annotatedElements>
        <mergeNodeMoniker
          Id="72396121-1fc3-4bf3-8805-4d681dcd0da6"
          LastKnownName="Merge6"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="a501acfb-3fe2-446d-b671-d40e47e13b60">
      <body>还有未处理的instalmentAccount？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="d676f1eb-012a-422e-9c1a-99d5c0bd1841"
          LastKnownName="Decision6"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="c6130ad8-a5ca-4668-b7b7-f0809918fe45">
      <body>开仓单？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="6fc95a51-3493-48e1-b185-bb6166d7ded8"
          LastKnownName="Decision1"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="2deb5078-4db9-4afd-9b10-c9ad2656be10">
      <body>affecteOrder处理完毕？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="07825070-9c89-4da9-bcf1-b01b3ffa28de"
          LastKnownName="Decision2"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="868c1776-371e-4b24-bebc-7432d7459024">
      <body>tradeDay已处理完毕？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="211304bc-fdd0-4165-b456-9e98d983597a"
          LastKnownName="Decision3"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="404c6d5f-4a43-499d-aed2-ede3558e02c4">
      <body>

&lt;Account&gt;
&lt;Orders&gt;
 &lt;Order&gt;
 &lt;Bills&gt;
 &lt;Bill  Value = ""  ValueDate = ""  TradeDay = ""    /&gt;
&lt;/Bills&gt;
 &lt;/Order&gt;
&lt;/Orders&gt;
</body>
      <annotatedElements>
        <opaqueActionMoniker
          Id="fd4594ad-9a5c-43d9-890e-e2b9e39e6345"
          LastKnownName="产生右侧所示Xml节点，并调用相关存储过程                "
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="22ef3088-88a9-4dd3-9da6-9d383c3be5d0">
      <body>开仓单？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="550bedbc-1e9b-4a16-b133-abec383e0c79"
          LastKnownName="Decision1"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="cb32c197-0537-48d9-8cc6-29796f125136">
      <body>order处理完毕？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="1dea80c0-7368-4980-b5db-9332efc3abf6"
          LastKnownName="Decision2"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="3ad9c779-610e-454d-80c8-a8ddb7bce8e1">
      <body>tradeDay处理完毕？</body>
      <annotatedElements>
        <decisionNodeMoniker
          Id="bafa562b-cb3f-4fe5-9beb-0038cfd8fd1b"
          LastKnownName="Decision21"
          LastKnownLocation="ResetFlow.uml" />
      </annotatedElements>
    </comment>
  </ownedCommentsInternal>
  <profileInstances>
    <packageHasProfileInstances
      Id="0caec977-1f8c-4ba3-a7db-8cc9ad9cc73b">
      <profileInstance
        Id="e34d544e-0fea-4ed6-ac5e-1b74119ac791"
        name="StandardProfileL2" />
    </packageHasProfileInstances>
    <packageHasProfileInstances
      Id="29349502-908c-4fda-9054-c48619c59ed0">
      <profileInstance
        Id="532ea607-fb19-44b8-8502-3351b05452be"
        name="StandardProfileL3" />
    </packageHasProfileInstances>
  </profileInstances>
  <packagedElements>
    <packageHasNamedElement>
      <activity
        Id="635f76f0-5ac0-4ef6-bd26-b8c33a6f41ba"
        name="NormalReset"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <opaqueAction
            Id="40b68539-eeae-4c50-9e53-e6be0c7950b6"
            name="得到instrument收市价格，tradeDay以及instrument"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="42e995a1-dbca-4fdf-89ec-b4acecfc40e6"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="cd2040f0-fcd3-4a14-94a0-2c54f184b5ee"
                  LastKnownName="Decision1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <initialNode
            Id="4a59d3f6-c4b9-4412-852b-db87d86949e9"
            name="Initial2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="ab489cf0-f715-4038-8f48-78a6d8c9cba4"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="40b68539-eeae-4c50-9e53-e6be0c7950b6"
                  LastKnownName="得到instrument收市价格，tradeDay以及instrument"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <decisionNode
            Id="cd2040f0-fcd3-4a14-94a0-2c54f184b5ee"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="04f839b9-2124-4649-9b6b-5c8abd8c60fd"
                guard="No"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="15f52967-a6da-4a90-a520-93bec527705e"
                  LastKnownName="for each account in instrument.accounts"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="b4d4acee-1d09-4f68-a943-625bd0594181"
                guard="Yes"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="98fc5627-89f4-4349-827d-cd855e765e5b"
                  LastKnownName="for each tradeDay between (tradeDay, lastTradeDay) "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="15f52967-a6da-4a90-a520-93bec527705e"
            name="for each account in instrument.accounts"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="278e4e3f-eff4-4919-965b-1c32e2666b66"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="3a3b4ee2-d8ab-455d-ab29-90ddd19eefe4"
                  LastKnownName="Merge2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="373ae1dd-f7a4-4036-9ced-06225bb49e35"
            name="for each tradeDay between  (lastTradeDay, tradeDay]"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="4991adde-6837-4ab8-9185-492eb4e9dfc7"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="f5aa52ae-0b1e-416d-9401-9f44fb2bd9c9"
                  LastKnownName="Merge3"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="c408df72-1072-4abe-baa9-3e48a4f8a304"
            name="for each order in  executed orders "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="8df9fbe1-2ab5-4699-b52a-e18114969e81"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="4b63d117-a005-43fc-8261-103d908b67c6"
                  LastKnownName="Merge5"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="3a3b4ee2-d8ab-455d-ab29-90ddd19eefe4"
            name="Merge2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="da5bdd56-65f5-4db7-8ace-2845844b74fb"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="373ae1dd-f7a4-4036-9ced-06225bb49e35"
                  LastKnownName="for each tradeDay between  (lastTradeDay, tradeDay]"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <mergeNode
            Id="f5aa52ae-0b1e-416d-9401-9f44fb2bd9c9"
            name="Merge3"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="9110404a-38b5-4561-912e-4c95df376dd6"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="c408df72-1072-4abe-baa9-3e48a4f8a304"
                  LastKnownName="for each order in  executed orders "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="69c7cf78-05ec-4fe2-b319-835fdefa6ac0"
            name="计算order的各种PL和FloatPL以及实货的冻绝资金&#xD;&#xA;"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="cdc47ab5-6c29-493f-bff5-87ab96066389"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="0508ce0c-ad66-4d8a-b015-71c65e0ef7cf"
                  LastKnownName="Decision3"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="0508ce0c-ad66-4d8a-b015-71c65e0ef7cf"
            name="Decision3"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="bea88f70-be84-4229-9d33-436ac79c7aeb"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="4b63d117-a005-43fc-8261-103d908b67c6"
                  LastKnownName="Merge5"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="ca2ad79d-37e7-48d4-bf00-e15e9c9a4bb7"
                guard="No"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="db2fa227-7bea-4804-a40e-38c496a4a758"
                  LastKnownName="Decision2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <mergeNode
            Id="4b63d117-a005-43fc-8261-103d908b67c6"
            name="Merge5"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="94ded612-6553-40ad-9c61-0d61597adcea"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="69c7cf78-05ec-4fe2-b319-835fdefa6ac0"
                  LastKnownName="计算order的各种PL和FloatPL以及实货的冻绝资金&#xD;&#xA;"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="98fc5627-89f4-4349-827d-cd855e765e5b"
            name="for each tradeDay between (tradeDay, lastTradeDay) "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="26be2f94-fbb4-4114-8ecd-da0462b9dae1"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="8f6c16be-2ea5-4c24-bb3d-39be118b6cf1"
                  LastKnownName="Merge1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="8f6c16be-2ea5-4c24-bb3d-39be118b6cf1"
            name="Merge1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="2332bd56-b3b2-4807-8232-195493d9d1aa"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="6c9bad17-3fbd-4c56-9fad-8fddc92de202"
                  LastKnownName="for each account in instrument.Accounts"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="6c9bad17-3fbd-4c56-9fad-8fddc92de202"
            name="for each account in instrument.Accounts"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="cc3562a2-637c-4818-8772-336b73259761"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="cf4e58fb-df88-44a7-8dbf-3507f5d0986a"
                  LastKnownName="Merge8"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="cf4e58fb-df88-44a7-8dbf-3507f5d0986a"
            name="Merge8"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="62e4f8f9-d7a6-46a6-aed6-cfe62a879bf3"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="bf1872bf-7327-46f5-82a1-5209304d9564"
                  LastKnownName="计算tradeDay这天，所有已成交order的PL"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="bf1872bf-7327-46f5-82a1-5209304d9564"
            name="计算tradeDay这天，所有已成交order的PL"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="9c2a8e29-9947-43ea-9278-490ecc417b2f"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="a232198a-35a9-4ee2-a699-696357098994"
                  LastKnownName="将每个Order的PL按右侧格式保存到Account下面的Order节点下"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="a232198a-35a9-4ee2-a699-696357098994"
            name="将每个Order的PL按右侧格式保存到Account下面的Order节点下"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="66f98181-78d1-459c-8afe-7cd2ee3970f2"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="185b7150-09b8-40d1-af77-407b9ca27f24"
                  LastKnownName="Decision8"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="185b7150-09b8-40d1-af77-407b9ca27f24"
            name="Decision8"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0036bba8-bf99-4f0b-9f35-4df2af23ad32"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="cf4e58fb-df88-44a7-8dbf-3507f5d0986a"
                  LastKnownName="Merge8"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="a5291205-b4da-4602-bb68-0826dd819a12"
                guard="No"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="cac0f6d5-6358-4128-bf10-4746f00adf82"
                  LastKnownName="Decision9"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="ff7e4859-a71e-4bec-ab4a-b196f64d25ac"
            name="将所有已成交的order的ValuedPL汇总为 deltaAmount，从account的balance上减去deltaAmount"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="40c91d3c-3564-43bd-a17b-40099e649d35"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="679fd26f-9b5c-4cb8-b8d6-6e121763bd40"
                  LastKnownName="for each account in instrument.Accounts"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="cac0f6d5-6358-4128-bf10-4746f00adf82"
            name="Decision9"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="25a1a1cc-e12e-42e5-a281-2d65a85a997a"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="8f6c16be-2ea5-4c24-bb3d-39be118b6cf1"
                  LastKnownName="Merge1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="8d06145f-4cb8-4011-a863-640ac3eebe3b"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="ff7e4859-a71e-4bec-ab4a-b196f64d25ac"
                  LastKnownName="将所有已成交的order的ValuedPL汇总为 deltaAmount，从account的balance上减去deltaAmount"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="679fd26f-9b5c-4cb8-b8d6-6e121763bd40"
            name="for each account in instrument.Accounts"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="46030c75-442a-433a-8c6b-9b425293b8fe"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="05015142-02e1-47e3-bb90-769b19b3912b"
                  LastKnownName="Merge9"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="05015142-02e1-47e3-bb90-769b19b3912b"
            name="Merge9"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="d42f899a-f9ed-4c21-be33-5117b2f8046e"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="31c09582-1901-402e-ba15-d7d52c3cd9f0"
                  LastKnownName="将account的变化保存到文件，并广播出去，将上述步骤所保存的输出xml， 调用存储过程"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="31c09582-1901-402e-ba15-d7d52c3cd9f0"
            name="将account的变化保存到文件，并广播出去，将上述步骤所保存的输出xml， 调用存储过程"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="8a33d164-fb79-4985-816e-a6f8dffd5f14"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="c23358b9-020b-4f8d-9110-cb591f490bc6"
                  LastKnownName="Decision10"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="c23358b9-020b-4f8d-9110-cb591f490bc6"
            name="Decision10"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="57fcd5be-5b7d-4ea1-9344-c2a03d673ba6"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="05015142-02e1-47e3-bb90-769b19b3912b"
                  LastKnownName="Merge9"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="85864c1f-9efa-4e76-8f85-9813a74c3710"
                guard="No"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="09c61b18-10a9-4ad4-b7f3-90f6fbed2daf"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <activityFinalNode
            Id="09c61b18-10a9-4ad4-b7f3-90f6fbed2daf"
            name="ActivityFinal1"
            isLeaf="false" />
          <opaqueAction
            Id="bc942c0f-7dda-4852-bd05-eb96a1bb2813"
            name="将所有已成交order的ValuedP汇总为 deltaAmount， 并加到account的balance上"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="1aaf3df6-c035-4a70-856b-b4b8011259a8"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="b17824a0-3a7a-41ac-9e92-b1bbf2ba8447"
                  LastKnownName="将account得变化保存到文件，并广播出去，并将account得reset状态清除"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="db2fa227-7bea-4804-a40e-38c496a4a758"
            name="Decision2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="6c1cfc98-ada4-4594-8180-4f82bb72a9a7"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="f5aa52ae-0b1e-416d-9401-9f44fb2bd9c9"
                  LastKnownName="Merge3"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="ba927fbf-5a2e-44aa-96f0-dddde7145890"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="bc942c0f-7dda-4852-bd05-eb96a1bb2813"
                  LastKnownName="将所有已成交order的ValuedP汇总为 deltaAmount， 并加到account的balance上"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="b17824a0-3a7a-41ac-9e92-b1bbf2ba8447"
            name="将account得变化保存到文件，并广播出去，并将account得reset状态清除"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="fc8a2718-a67d-4651-ba8d-24bbae1b6522"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="08339879-9ce4-4df1-acd4-7cfbe3dfc5ae"
                  LastKnownName="Decision4"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="08339879-9ce4-4df1-acd4-7cfbe3dfc5ae"
            name="Decision4"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="7e9e3b86-6118-4070-b37a-25ad3be05eaf"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="3a3b4ee2-d8ab-455d-ab29-90ddd19eefe4"
                  LastKnownName="Merge2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="bffe8d39-fc7e-428a-8a56-5742c766628b"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="4b19adbb-e7e9-4d88-8a58-4cd8be14170f"
                  LastKnownName="对于每个有分期付款(instalment)单子的账户(instalmentAccount)"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="4b19adbb-e7e9-4d88-8a58-4cd8be14170f"
            name="对于每个有分期付款(instalment)单子的账户(instalmentAccount)"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="7ace6029-7e2a-483a-a9f1-e4053b68d451"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="7c1f4274-3263-4779-98cc-91c744ed6d51"
                  LastKnownName="Merge4"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="7c1f4274-3263-4779-98cc-91c744ed6d51"
            name="Merge4"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="5e96958c-4349-4cc9-8939-2b7ccafd3db2"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="d72388c8-d1df-4b7c-96aa-3bd4e8cd48ee"
                  LastKnownName="对于每一个instalmentOrder"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="d72388c8-d1df-4b7c-96aa-3bd4e8cd48ee"
            name="对于每一个instalmentOrder"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="a418323b-6681-4b00-b80f-9e177d38fc48"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="72396121-1fc3-4bf3-8805-4d681dcd0da6"
                  LastKnownName="Merge6"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="72396121-1fc3-4bf3-8805-4d681dcd0da6"
            name="Merge6"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="3e2ba546-1057-4753-8027-c464e3108304"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="5a45bf14-1b73-46a9-8346-ef77823251e0"
                  LastKnownName="执行分期付款操作"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="5a45bf14-1b73-46a9-8346-ef77823251e0"
            name="执行分期付款操作"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="a3a48e94-83d6-44f4-8431-f4e1a8acc914"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="c0472cb2-5659-4282-a074-e734e6fb05e4"
                  LastKnownName="Decision5"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="c0472cb2-5659-4282-a074-e734e6fb05e4"
            name="Decision5"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="7bb75732-0313-46e7-a5fe-b805e8200db6"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="72396121-1fc3-4bf3-8805-4d681dcd0da6"
                  LastKnownName="Merge6"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="8faddd93-a94a-4bc3-8140-f68b908204f2"
                guard="No"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="286b868d-9926-4a70-b79d-7d3be5ea3cb1"
                  LastKnownName="将instalmentAccount变化的内容保存到文件，并广播出去"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="286b868d-9926-4a70-b79d-7d3be5ea3cb1"
            name="将instalmentAccount变化的内容保存到文件，并广播出去"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="e87ebe57-771c-425c-a181-e7c844e2d85e"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="d676f1eb-012a-422e-9c1a-99d5c0bd1841"
                  LastKnownName="Decision6"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="d676f1eb-012a-422e-9c1a-99d5c0bd1841"
            name="Decision6"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="73c4f449-5a03-4aa5-9069-85067a40892e"
                guard="Yes"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="7c1f4274-3263-4779-98cc-91c744ed6d51"
                  LastKnownName="Merge4"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="e297d197-896d-4ef9-a4de-487824f97d45"
                guard="No"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="09c61b18-10a9-4ad4-b7f3-90f6fbed2daf"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="0b975823-7fa1-4027-95ae-e4173cef8a92"
        name="Activity1"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="26165805-1978-4cc8-9ffe-b49417d4e1a1"
            name="Initial1"
            isLeaf="false">
            <objectFlowTargets>
              <objectFlow
                Id="311db224-1c7f-4786-a610-885f08ec560a"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <inputPinMoniker
                  Id="4ce3882d-618a-4d0e-babe-e4f97b8d4a8f"
                  LastKnownLocation="ResetFlow.uml" />
              </objectFlow>
            </objectFlowTargets>
          </initialNode>
          <opaqueAction
            Id="baaa53af-c86a-4a64-8900-9de3ef31c37d"
            name="closePrice, tradeDay,  instrument"
            isLeaf="false">
            <pins>
              <opaqueActionHasInputValues>
                <inputPin
                  Id="4ce3882d-618a-4d0e-babe-e4f97b8d4a8f"
                  isLeaf="false"
                  ordering="Unordered"
                  isControlType="false"
                  isControl="false">
                  <upperBound>
                    <literalInteger
                      Id="b889204c-f825-4246-beec-26898981aeb1"
                      name="2147483647"
                      value="2147483647" />
                  </upperBound>
                </inputPin>
              </opaqueActionHasInputValues>
            </pins>
          </opaqueAction>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="7e709fb5-4e0a-45fb-a5a3-ecfed5f62333"
        name="CreateAndDeleteHitoryOrder"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="33d80fd3-0c1d-48c8-bd43-a277e1a22b68"
            name="Initial1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0cd088b8-9e8d-465d-b56b-14a21995155f"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="6fc95a51-3493-48e1-b185-bb6166d7ded8"
                  LastKnownName="Decision1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <opaqueAction
            Id="a1360bf5-229c-49fe-8fac-bff0b50388f7"
            name="找出Order所影响的PhysicalRequest"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="69215a2c-bbaa-4be6-98c7-fa5b1ffaa19e"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="3dcb3e0d-dc9c-48f5-ae6d-21744cdaa173"
                  LastKnownName="从account的balance上减去以下费用：1、ValuedPL   2、费用(commission， levy， physicalPaymentDiscount）  3、减去physicalRequest所产生的费用"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="6fc95a51-3493-48e1-b185-bb6166d7ded8"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="5b5d2e7f-89fd-486c-85c3-5d1f1dd7b6ff"
                guard="Yes"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="a1360bf5-229c-49fe-8fac-bff0b50388f7"
                  LastKnownName="找出Order所影响的PhysicalRequest"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="707794bd-ab43-4e13-aff6-b650d027425d"
                guard="No"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="ed003d7c-7d33-4abd-9fd1-893d2da2dc47"
                  LastKnownName="得到所有受影响的开仓单，记为affectOrders       "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="ed003d7c-7d33-4abd-9fd1-893d2da2dc47"
            name="得到所有受影响的开仓单，记为affectOrders       "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="2f5b57a5-95ca-4cd8-b43d-6dbd8d0c9fce"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="18784d39-97c6-4f84-80a0-9558e7764343"
                  LastKnownName="for each  openOrder in affectOrders"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="a5ba4a1a-1556-4ea6-ac1c-e9a3d2aba34e"
            name="删除受影响的PhysicalRequestOrderRelation，DeliveryRequest，ScrapDeposit"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0a813f0f-c2d2-477e-b120-e114814271c6"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="43ee291f-f050-47fd-8e41-355c140f6873"
                  LastKnownName="删除与该order相关联的OrderRelation，以及该Order"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="3dcb3e0d-dc9c-48f5-ae6d-21744cdaa173"
            name="从account的balance上减去以下费用：1、ValuedPL   2、费用(commission， levy， physicalPaymentDiscount）  3、减去physicalRequest所产生的费用"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="61820be1-8e54-41da-aea9-bafe57613516"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="a5ba4a1a-1556-4ea6-ac1c-e9a3d2aba34e"
                  LastKnownName="删除受影响的PhysicalRequestOrderRelation，DeliveryRequest，ScrapDeposit"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="18784d39-97c6-4f84-80a0-9558e7764343"
            name="for each  openOrder in affectOrders"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="c2bb2762-33ca-4620-a871-0f915114edcd"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="6c8d338b-92cd-4769-8f49-5412926e9742"
                  LastKnownName="Merge1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="0d731a62-ab49-46e5-89db-633ef8099802"
            name="将openOrder的如下值加回去：closedLot,  paybackPledge 和closedPhysicalValue"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="3079da89-505b-46c2-8815-2814b04d2f4d"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="07825070-9c89-4da9-bcf1-b01b3ffa28de"
                  LastKnownName="Decision2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="08fed920-73ff-4eb4-882c-c254fc515800"
            name="保存account的变化到文件，以及广播出去                       "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="d2918694-9c31-4337-8ed7-d6940829589a"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="e6bd697f-1d04-4227-b305-878dbd3b7290"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="43ee291f-f050-47fd-8e41-355c140f6873"
            name="删除与该order相关联的OrderRelation，以及该Order"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="74c56f0d-8363-4162-9267-fe6445b80d8a"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="08fed920-73ff-4eb4-882c-c254fc515800"
                  LastKnownName="保存account的变化到文件，以及广播出去                       "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="6c8d338b-92cd-4769-8f49-5412926e9742"
            name="Merge1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="4894b7c8-ee70-41c1-ad26-1c89c4afb5e4"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="0d731a62-ab49-46e5-89db-633ef8099802"
                  LastKnownName="将openOrder的如下值加回去：closedLot,  paybackPledge 和closedPhysicalValue"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <decisionNode
            Id="07825070-9c89-4da9-bcf1-b01b3ffa28de"
            name="Decision2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="203f0bff-2b86-4dcf-8b25-e9813e534d3e"
                guard="No"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="6c8d338b-92cd-4769-8f49-5412926e9742"
                  LastKnownName="Merge1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="cfde1a68-1c46-4d32-af19-31484c42d08a"
                guard="Yes"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="851e6c9e-85e5-4c98-9aeb-41a9a4d4dac5"
                  LastKnownName="找出该Order所返还的pledge和instalmentPledge，所对应的OpenOrders， 并将所有这些值从account减去"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="8c422305-a578-408f-9d22-05caa896414a"
            name="for each  tradeDay in (order.ExecuteTime to  account.LastTradeDay)"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="398f3d9d-c515-4280-9ded-56c7dc4fea79"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="d60c4b14-e36d-45b5-80f2-1e9a47f0b8fc"
                  LastKnownName="Merge2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="851e6c9e-85e5-4c98-9aeb-41a9a4d4dac5"
            name="找出该Order所返还的pledge和instalmentPledge，所对应的OpenOrders， 并将所有这些值从account减去"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="b3dcab74-7fcd-43f1-ab50-c35e9a0eb601"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="dae087a0-185b-408c-aaeb-f57addf005f2"
                  LastKnownName="删除受影响的PhysicalRequestOrderRelation，DeliveryRequest，ScrapDeposit1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="dae087a0-185b-408c-aaeb-f57addf005f2"
            name="删除受影响的PhysicalRequestOrderRelation，DeliveryRequest，ScrapDeposit1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="01e6555b-5528-432f-b08b-c7f2de6ea0ba"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="8c422305-a578-408f-9d22-05caa896414a"
                  LastKnownName="for each  tradeDay in (order.ExecuteTime to  account.LastTradeDay)"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="d60c4b14-e36d-45b5-80f2-1e9a47f0b8fc"
            name="Merge2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="4bc3caa6-237d-47a1-a31a-8f860cb6ddd1"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="1c176d68-9fbe-44e2-8304-c68e125ea803"
                  LastKnownName="重新计算tradeDay这天， 每个affectOrder的各种PL，以及order的Bill记录"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="fd4594ad-9a5c-43d9-890e-e2b9e39e6345"
            name="产生右侧所示Xml节点，并调用相关存储过程                "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="b7c3902c-1604-403a-9a43-f16f659091f8"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="457e5d88-59bb-4659-9e85-3c305f88c124"
                  LastKnownName="保存account的变化到文件，以及广播出去                    "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="116ee670-9c87-4db7-8bef-cc90a5d7c152"
            name="从account的balance上减去所有的affectedOrder的ValuedPL之和"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="627fdadc-ebd1-433d-b580-1b8376d32736"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="bb00b7af-c715-4552-81df-b34884e986ce"
                  LastKnownName="删除与该order相关联的OrderRelation，以及该Order1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="1c176d68-9fbe-44e2-8304-c68e125ea803"
            name="重新计算tradeDay这天， 每个affectOrder的各种PL，以及order的Bill记录"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="306c03e9-c698-4785-a7dc-f6c32d8ad93b"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="211304bc-fdd0-4165-b456-9e98d983597a"
                  LastKnownName="Decision3"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="211304bc-fdd0-4165-b456-9e98d983597a"
            name="Decision3"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0774ade7-ebe0-4b02-af22-278c1c01d820"
                guard="Yes"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="116ee670-9c87-4db7-8bef-cc90a5d7c152"
                  LastKnownName="从account的balance上减去所有的affectedOrder的ValuedPL之和"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="ce7dc637-0830-45e2-b158-c0717ba0574e"
                guard="No"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="d60c4b14-e36d-45b5-80f2-1e9a47f0b8fc"
                  LastKnownName="Merge2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="bb00b7af-c715-4552-81df-b34884e986ce"
            name="删除与该order相关联的OrderRelation，以及该Order1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="5c0a739f-40f3-4dd9-9d1d-3b099a659add"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="fd4594ad-9a5c-43d9-890e-e2b9e39e6345"
                  LastKnownName="产生右侧所示Xml节点，并调用相关存储过程                "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <activityFinalNode
            Id="e6bd697f-1d04-4227-b305-878dbd3b7290"
            name="ActivityFinal1"
            isLeaf="false" />
          <opaqueAction
            Id="457e5d88-59bb-4659-9e85-3c305f88c124"
            name="保存account的变化到文件，以及广播出去                    "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="b0986933-494d-44f9-be3e-7e6ec368e679"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="e6bd697f-1d04-4227-b305-878dbd3b7290"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="8e11cea8-7283-401f-ae0c-b3859c00cc10"
        name="ExecuteHistoryOrder"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="99e564aa-2036-40d6-8d47-b7751489fe03"
            name="Initial1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="817dbfc6-760a-4639-ae36-1213e9c23579"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="032d07f9-5d8b-450c-9335-d6e39acbd122"
                  LastKnownName="下单以及成交"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <opaqueAction
            Id="032d07f9-5d8b-450c-9335-d6e39acbd122"
            name="下单以及成交"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="f0bf3957-af12-42c9-9c74-1957e860c348"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="550bedbc-1e9b-4a16-b133-abec383e0c79"
                  LastKnownName="Decision1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="b6b326ba-8343-495f-a9de-28127f6ab3a0"
            name="计算order在tradeDay下的各种PL（NotValuedPl, ValuedPL, FloatPL, DayInterest, DayStorage）"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="552fa2e8-a6bc-4038-a527-7e0a16aa7813"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="5e381917-2794-4005-a924-27ddcc68b9d9"
                  LastKnownName="产生order在tradeDay下产生的各PL的Bill记录， 形如：&lt;Bill  Value=&quot;&quot;,  Type = &quot;&quot;, ValueDate= &quot;&quot;   TradeDay = &quot;&quot;    /&gt; "
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="464df7b9-bb2d-4929-8f37-dc55bbdf3dd5"
            name="for each order in affectedOrders"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="97a4bf59-2792-4228-abdd-a3b99a3c09ba"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="ad7799ec-0adf-4d73-8967-f716a5f6a92a"
                  LastKnownName="Merge11"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="edd3e306-5385-4636-9090-a86a7c819967"
            name="for each tradeDay  between(exectedDate,account.lastTradeDay)"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="e396a4c8-2dc5-4d7c-9d53-a0f464c518cb"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="2a9a5b49-d56b-4915-8edb-c4407704d3bd"
                  LastKnownName="Merge1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="1dd0a745-b644-48d3-b7d9-60d893e11080"
            name="affectedOrders 为当前transaction下的所有order以及其所平仓的openOrder"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="732740e9-f370-4d4c-a908-d52e1cd61f7a"
                isLeaf="false">
                <joinNodeMoniker
                  Id="868a7662-9102-474a-8323-50af0eef5102"
                  LastKnownName="Join1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="8527e1e6-6684-49e0-96be-0d1f2eec6437"
            name="需要重新计算的 affectedOrders为 当前transaction下所有的order"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0a3608d0-b0de-4c56-beb1-9f01d364ba62"
                isLeaf="false">
                <joinNodeMoniker
                  Id="868a7662-9102-474a-8323-50af0eef5102"
                  LastKnownName="Join1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="550bedbc-1e9b-4a16-b133-abec383e0c79"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="16620ac8-c718-44bc-a205-3a6ed7d7ce45"
                guard="Yes"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="8527e1e6-6684-49e0-96be-0d1f2eec6437"
                  LastKnownName="需要重新计算的 affectedOrders为 当前transaction下所有的order"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="fcb207ef-f8c8-4123-998a-9c92694a6b5d"
                guard="No"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="1dd0a745-b644-48d3-b7d9-60d893e11080"
                  LastKnownName="affectedOrders 为当前transaction下的所有order以及其所平仓的openOrder"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <joinNode
            Id="868a7662-9102-474a-8323-50af0eef5102"
            name="Join1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="e5898bff-c5d5-403f-ba3f-c1ff4e7063b2"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="edd3e306-5385-4636-9090-a86a7c819967"
                  LastKnownName="for each tradeDay  between(exectedDate,account.lastTradeDay)"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </joinNode>
          <mergeNode
            Id="2a9a5b49-d56b-4915-8edb-c4407704d3bd"
            name="Merge1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="a89b1722-c116-414b-97c4-93333f4d6da9"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="464df7b9-bb2d-4929-8f37-dc55bbdf3dd5"
                  LastKnownName="for each order in affectedOrders"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="fc86ca15-bfa4-4fb0-b3d8-212ac3ecab01"
            name="调用存储过程，并传入上述产生的Bill记录"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="ced5cb64-a203-482a-a2e9-31c86df6946c"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="d73b6112-abdd-4de0-b471-c07b47a5ff6c"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="5e381917-2794-4005-a924-27ddcc68b9d9"
            name="产生order在tradeDay下产生的各PL的Bill记录， 形如：&lt;Bill  Value=&quot;&quot;,  Type = &quot;&quot;, ValueDate= &quot;&quot;   TradeDay = &quot;&quot;    /&gt; "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="9c12a6bd-1d9b-49c4-9fda-2522464db8a2"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="1dea80c0-7368-4980-b5db-9332efc3abf6"
                  LastKnownName="Decision2"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="f7f73e59-6d32-4a20-b61c-4ce1045e500d"
            name="汇总affectedOrders的ValuedPL以及各种费用， 并加到account的balance上"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="a366f8ef-fa11-49fe-a1eb-d3b38bccabf7"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="3a94d386-1111-4938-b31f-3b3745c4048b"
                  LastKnownName="保存account的变化到文件，并广播"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="3a94d386-1111-4938-b31f-3b3745c4048b"
            name="保存account的变化到文件，并广播"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="70de8a7f-a2e1-4bbe-b57d-981223c56415"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="fc86ca15-bfa4-4fb0-b3d8-212ac3ecab01"
                  LastKnownName="调用存储过程，并传入上述产生的Bill记录"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="1dea80c0-7368-4980-b5db-9332efc3abf6"
            name="Decision2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0d27b2b9-3da6-44ca-8b18-9a7c17dc321c"
                guard="No"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="ad7799ec-0adf-4d73-8967-f716a5f6a92a"
                  LastKnownName="Merge11"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="d757e939-2007-4afb-8d35-731157797570"
                guard="Yes"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="bafa562b-cb3f-4fe5-9beb-0038cfd8fd1b"
                  LastKnownName="Decision21"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <mergeNode
            Id="ad7799ec-0adf-4d73-8967-f716a5f6a92a"
            name="Merge11"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="1acfc40a-a4be-4f9b-a261-5177cc6c48ed"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="b6b326ba-8343-495f-a9de-28127f6ab3a0"
                  LastKnownName="计算order在tradeDay下的各种PL（NotValuedPl, ValuedPL, FloatPL, DayInterest, DayStorage）"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <decisionNode
            Id="bafa562b-cb3f-4fe5-9beb-0038cfd8fd1b"
            name="Decision21"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="ec876316-0f26-4963-87fb-5441b9dba46f"
                guard="No"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="2a9a5b49-d56b-4915-8edb-c4407704d3bd"
                  LastKnownName="Merge1"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
              <controlFlow
                Id="90086ce4-b564-4f81-ad2a-882cad2248ee"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="f7f73e59-6d32-4a20-b61c-4ce1045e500d"
                  LastKnownName="汇总affectedOrders的ValuedPL以及各种费用， 并加到account的balance上"
                  LastKnownLocation="ResetFlow.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <activityFinalNode
            Id="d73b6112-abdd-4de0-b471-c07b47a5ff6c"
            name="ActivityFinal1"
            isLeaf="false" />
        </nodes>
      </activity>
    </packageHasNamedElement>
  </packagedElements>
  <primitiveType
    Id="220a3521-e091-4221-bae9-3ef9018e845c"
    name="Integer"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="8943dc84-709e-4f62-b15a-a3273aa6f165"
    name="Boolean"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="59259974-6d55-42c6-b7bd-763d77ac8ef9"
    name="String"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="3ab42e7d-4969-445a-b209-471f5cb8209c"
    name="UnlimitedNatural"
    isAbstract="false"
    isLeaf="false" />
</modelStoreModel>